<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>콘텐츠 관리</title>
  <link rel="stylesheet" href="/css/site.css">
</head>
<body>
<div th:replace="fragments :: topbar"></div>
<main class="container grid" style="gap:14px;">
  <div class="message error" th:if="${errorMessage}" th:text="${errorMessage}"></div>
  <div class="message success" th:if="${successMessage}" th:text="${successMessage}"></div>

  <section class="panel">
    <h3>행사 등록</h3>
    <form class="grid" style="grid-template-columns:1fr 1fr 1fr 1fr;gap:8px;" method="post" action="/admin/content/promotions">
      <input name="title" placeholder="행사 제목" required>
      <input name="promoType" value="WEEKLY" placeholder="타입">
      <input name="productIds" placeholder="상품ID CSV (예: 1,2)">
      <input name="promoPrice" placeholder="행사가">
      <input type="datetime-local" name="startAt" required>
      <input type="datetime-local" name="endAt" required>
      <input name="bannerImageUrl" placeholder="배너 이미지 URL">
      <button type="submit">행사 등록</button>
    </form>
    <div class="table-wrap" style="margin-top:10px;">
      <table>
        <thead><tr><th>ID</th><th>제목</th><th>상품</th><th>기간</th></tr></thead>
        <tbody>
        <tr th:each="p : ${promotions}">
          <td th:text="${p.id}"></td>
          <td th:text="${p.title}"></td>
          <td th:text="${p.product_ids}"></td>
          <td th:text="${p.start_at} + ' ~ ' + ${p.end_at}"></td>
        </tr>
        </tbody>
      </table>
    </div>
  </section>

  <section class="panel">
    <h3>배너 등록</h3>
    <form class="grid" style="grid-template-columns:1fr 1fr 1fr 1fr;gap:8px;" method="post" action="/admin/content/banners">
      <input name="title" placeholder="배너 제목" required>
      <input name="imageUrl" placeholder="이미지 URL" required>
      <input name="linkType" value="PROMOTION" placeholder="링크 타입">
      <input name="linkTarget" placeholder="링크 타겟">
      <input name="displayOrder" type="number" value="0">
      <input type="datetime-local" name="startAt" required>
      <input type="datetime-local" name="endAt" required>
      <button type="submit">배너 등록</button>
    </form>
    <div class="table-wrap" style="margin-top:10px;">
      <table>
        <thead><tr><th>ID</th><th>제목</th><th>순서</th><th>활성</th></tr></thead>
        <tbody>
        <tr th:each="b : ${banners}">
          <td th:text="${b.id}"></td>
          <td th:text="${b.title}"></td>
          <td th:text="${b.display_order}"></td>
          <td th:text="${b.is_active}"></td>
        </tr>
        </tbody>
      </table>
    </div>
  </section>

  <section class="panel">
    <h3>공지 등록</h3>
    <form class="grid" style="grid-template-columns:1fr 2fr 1fr 1fr auto;gap:8px;" method="post" action="/admin/content/notices">
      <input name="title" placeholder="공지 제목" required>
      <input name="body" placeholder="공지 내용" required>
      <input type="datetime-local" name="startAt" required>
      <input type="datetime-local" name="endAt" required>
      <label style="display:flex;align-items:center;gap:6px;"><input type="checkbox" name="pinned" value="true" style="width:auto;">고정</label>
      <button type="submit">공지 등록</button>
    </form>
    <div class="table-wrap" style="margin-top:10px;">
      <table>
        <thead><tr><th>ID</th><th>제목</th><th>고정</th><th>기간</th></tr></thead>
        <tbody>
        <tr th:each="n : ${notices}">
          <td th:text="${n.id}"></td>
          <td th:text="${n.title}"></td>
          <td th:text="${n.is_pinned}"></td>
          <td th:text="${n.start_at} + ' ~ ' + ${n.end_at}"></td>
        </tr>
        </tbody>
      </table>
    </div>
  </section>

  <a class="btn subtle" href="/admin/orders">주문관리로 돌아가기</a>
</main>
</body>
</html>
